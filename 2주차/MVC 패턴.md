# MVC 패턴을 공부하는 이유📖

- 저번 1주차의 미션을 완성하고 다른 분들의 코드를 둘러보고 디스코드에서 많은 정보를 공유받았는데 MVC패턴에 대한 얘기가 많이 나왔습니다!
- 저도 이전 김영한 님의 Spring 강의를 들으며 MVC 패턴이라는 것의 대략적인 내용을 이해하고 있는 상태였고 2주차 미션에는 한 번 자세히 공부하여 적용해보자는 마음을 가지고 있었습니다!
- “우선 저는 지금 돌아가는 쓰레기라도 먼저 만들자!” 라는 마음으로 1주차 미션에서 했던 것과 비슷하게 프로그램을 구성해놓은 상태입니다!
    - 현재의 프로그램 구성은 이렇습니다
    - Application : main함수를 포함하며 전체 클래스들을 사용하여 게임을 진행시키는 클래스
    - CarInput : 사용자의 입력을 받는 클래스
    - ValidCheck : 사용자 입력에 대한 유효성을 검사하는 클래스
    - CarMove : 게임이 진행되고 차의 움직임을 저장하는 클래스
    - PrintResult : 차량의 움직임과 최종 우승자를 출력하는 클래스
- 그럼 MVC패턴을 공부하여 제 코드에 적용해보는 시간을 가지겠습니다!

# MVC 패턴

- 우선 MVC 패턴이 뭔지를 알아야겠죠??
- MVC 패턴은 Model-View-Controller의 약어로 애플리케이션 개발에 사용되는 디자인 패턴입니다!
    - 디자인 패턴이란 애플리케이션을 개발, 설계할 때 발견된 반복적인 패턴들을 정리해놓은 것입니다!
    - 즉, 반복적으로 일어나는 문제들에 대한 솔루션이라고 볼 수 있습니다!
- 우선 Model, View, Controller가 뭔지 알아보고 MVC패턴의 장점과 간단한 예시를 알아보겠습니다.

## Model

- Model이란 애플리케이션의 데이터, 정보를 나타내고 처리하는 영역입니다.
- Model을 다음과 같은 규칙을 가지고 있습니다.
    1. 사용자가 편집하길 원하는 모든 데이터를 가지고 있어야 한다.
        - 화면 안에 글자가 위치한다면 그 글자에 대한 위치 정보, 내용, 글자의 포맷 등을 model이 가지고 있어야 합니다.
    2. View와 Controller에 의존적이지 않아야 한다.
    3. 변경이 일어나면, 변경 통지에 대한 처리방법을 구현해야만 한다.
        - 화면의 글자에 대한 정보가 변경되면 이벤트를 발생시켜 누군가에게 전달해야하며 누군가 변경 요청에 대한 이벤트를 보낸다면 이를 수신하여 처리할 방법을 구현해야 한다.

## View

- View는 애플리케이션 사용자에게 보이는 화면입니다.
- 아래에서 설명할 Controller에서 받은 데이터의 출력과 화면의 디자인 등을 처리하는 영역입니다.
- 저희가 진행하는 프리코스 2주차 미션인 자동차 경주에서는 화면의 디자인이 필요하지 않으니 데이터의 출력등 화면에 출력되는 부분에 적용할 수 있을 것 같습니다.
- View에도 다음과 같은 규칙이 있습니다.
    1. Model이 가지고 있는 정보를 저장해서는 안된다.
        - 화면에 글자 같은 것을 출력하기 위해서는 Model에서 데이터를 전달받게 될 것입니다. 이 때 그 정보를 다시 사용하거나 유지하기 위해 저장을 하면 안됩니다.
    2. Model이나 Controller와 같이 다른 구성요소들을 몰라야 된다.
        - 위 model 규칙의 2번과 동일합니다. 본인의 요소 빼고는 아무것도 몰라야 합니다. 예를 들면 데이터를 받아서 화면에 출력할 때 데이터에 대해 알 필요는 없고 그냥 그것을 화면에 출력해주기만 하면 됩니다.
    
    3. 변경이 일어나면 변경통지에 대한 처리방법을 구현해야만 한다.
    
    - 이 부분도 model과 동일하게 변경이 일어났을 때 이를 누군가에게 변경을 알려줘야 하는 방법을 구현해야 합니다. 만약 화면에서 사용자가 내용을 변경하면 이를 모델에게 전달하여 모델을 변경해야할 것입니다.

## Controller

- Comtroller는 MVC 패턴의 핵심이며 사용자 요청에 중심에 위치합니다.
- 사용자의 요청은 바로 View로 가는 것이 아니라 무조건 Controller를 통해야하고 Controller는 이를 처리하고 View에 전달합니다. 즉, 데이터와 사용자인터페이스 요소들을 잇는 다리역할을 합니다.
- Controller에도 다음과 같은 규칙이 있습니다.
    1. 모델과 뷰에 대해서 알고 있어야 한다.
        - Controller는 Model이나 View를 중재하여 컨트롤하기 위해서 이들에 대해서 알고 있어야합니다. 예를 들어 Controller는 특정 View를 지정해줘야 합니다.
    2. 모델이나 뷰의 변경을 모니터링 해야 한다.
        - 모델이나 뷰의 변경 통지를 받으면 이를 해석해서 각각의 구성 요소에게 통지를 해야 합니다.
- 애플리케이션의 메인 로직은 컨트롤러가 담당하게 됩니다.
- 그러므로 프로그램의 규모가 커질수록 Controller의 역할과 부담이 커지게 되므로 복잡해지고 관리가 어려워집니다.
- 이런 Controller의 부담을 줄여주기 위해 Service단이 있고 유지보수를 위해 태어났다고 합니다. 이는 추후 Service단이 필요하게 된다면 더 자세히 공부해보도록 하겠습니다.

## MVC 패턴의 장점

- 그렇다면 이런 MVC 패턴을 왜 사용해야할까요?
- 바로 가장 큰 장점은 분업으로 인한 장점이 있습니다.
- 프로그램의 일을 분할하여 각자의 역할에 집중하게 만든다면 아래와 같은 많은 장점들이 있습니다.
    - 단순하고 직관적이다.
    - 각자의 역할에 맞게 분리되어있어서 수정 및 **유지보수에 용이**하다.
    - 코드의 재사용성, 애플리케이션의 확장성, 새로운 요구사항에 대한 유연성이 증가한다.

## 정리

- Model : 데이터를 처리하는 부분
- View : 사용자에게 보여지는 부분
- Controller : Model과 View를 관리하는 부분
- MVC 패턴을 지키면서 코딩하는 방법
    1. Model은 Controller와 View에 의존하지 않아야 합니다.
        
        → Model 내부에 Controller와 View에 관련된 코드를 가지고 있으면 안됩니다.
        
    2. View는 Model에만 의존해야하고 Controller에 의존하면 안됩니다.
        
        → View 내부에는 Model의 코드만 있을 수 있고 Controller의 코드가 있으면 안된다.
        
    3. View가 Model로부터 데이터를 받을 때는 사용자마다 다르게 보여주어야하는 데이터만 받아야한다.
        - 자동차 경주같은 경우에서 사용자마다 다른 데이터는 자동차의 움직임 상황?
    4. Controller는 Model과 View에 의존해도 된다.
        
        → Controller 내부에는 Model과 View의 코드가 있을 수도 있다.
        
    5. View가 Model로부터 데이터를 받을 때 반드시 Controller를 통해 받아야 한다.

## 자동차 경주 프로그램에 적용해보기

- 우선 현재의 프로그램 코드는 이렇습니다!
    - Application : main함수를 포함하며 전체 클래스들을 사용하여 게임을 진행시키는 클래스
    - CarInput : 사용자의 입력을 받는 클래스
    - ValidCheck : 사용자 입력에 대한 유효성을 검사하는 클래스
    - CarMove : 게임이 진행되고 차의 움직임을 저장하는 클래스
    - PrintResult : 차량의 움직임과 최종 우승자를 출력하는 클래스
- 일단 MVC 패턴을 공부해본 제 생각으로는
    - Model에는 게임이 진행되고 차의 움직임을 View에게 전달하는 클래스와 유효성을 검사하는 클래스
    - View에는 Input을 받을때 출력할 클래스와 결과를 출력할 때 Model에서 데이터를 받아와 사용할 클래스, 최종 우승자를 출력할 때 사용할 클래스
    - Controller에는 Model과 View를 연결하여 게임을 진행시키는 클래스가 필요하다고 판단하였습니다!
- 그래서 패키지와 클래스의 구성을 다음과 같이 구성해보았습니다.
    - Model 패키지
        - Car : 자동차의 이름과 이동횟수로 구성된 객체를 생성하는 클래스
        - CreateCar : string으로 입력받은 차를 “,”를 기준으로 구분하여 Car객체의 list로 저장
        - CarMove : 자동차의 랜덤수를 생성하여 이동을 판단하고 이동시키는 클래스
        - ValidCheck : 입력값의 유효성을 검사하는 클래스
    - View 패키지
        - PrintInput : 입력값을 받을 때 사용자에게 보여지는 출력 클래스
        - PrintOutput : 각 게임의 결과값을 사용자에게 보여주는 출력 클래스
        - PrintResult : 최종 우승자를 사용자에게 보여주는 출력 클래스
    - Controller 패키지
        - PlayGame : Model과 View를 사용해 사용자에게 게임을 제공하는 클래스
    - Application 클래스
- 그리하여 이러한 구성이 완성되었습니다!!👏👏
<img width="706" alt="image" src="https://github.com/alswp006/woowa-6th-precourse-memory/assets/102672547/0150f18f-6283-440e-b8a5-351ca141267a">

- MVC 패턴을 정리한 부분에서 5가지 규칙이 있었죠. 이를 잘 지켰는지 확인해보겠습니다!
1. Model은 Controller와 View에 의존하지 않아야 합니다.
    - 넵, Model에는 Controller나 View에 관련된 코드들 없이 구성되어 있습니다.
2. View는 Model에만 의존해야하고 Controller에 의존하면 안됩니다.
    - View에도 아예 의존 요소를 넣지 않고 출력 메소드들만 만들어 Controller에서 사용하게 만들었습니다.
        
        → 사실 아직 이게 잘한건지 잘못된건지는 잘 모르겠습니다..
        
3. View가 Model로부터 데이터를 받을 때는 사용자마다 다르게 보여주어야하는 데이터만 받아야한다.
    - View에서 Model로부터 데이터를 받는 것은 차가 이동한 거리와 최종 우승자 배열이 있는데 이는 사용자마다 다르게 보여야하는 데이터라고 생각하여 Controller가 Model로부터 데이터를 받아와 View에 넣어주는 방식으로 사용하고 있습니다.(5번 규칙 적용)
4. Controller는 Model과 View에 의존해도 된다.
    - Controller에서 Model과 View의 메소드들을 사용하고 있기 때문에 의존하고 있습니다.
5. View가 Model로부터 데이터를 받을 때 반드시 Controller를 통해 받아야 한다.
    - 이는 3번에서 말했듯이 Model과 View는 직접 연관된 부분은 없고 Controller를 통해 조정됩니다.

## 회고

- 제리님의 MVC패턴 강의를 볼 때 사용할 수 없는 이론은 죽은 이론이라고 말씀해주셨습니다.
- 그리고 그 말은 MVC패턴을 직접 사용해보며 몸소 느낄 수 있었습니다.
- MVC패턴을 적용해보며 머릿속에서 모호하게 느껴지던 이론들이 어느정도 정리가 되는 것을 느꼈고 가장 중요한 것은 코드가 가독성이 있어지고 깔끔해지는 것이 눈에 보일 정도여서 더 디자인 패턴들에 대한 중요성이 와닿은 것 같습니다.
- 하지만 아직도 제가 MVC 패턴을 잘 적용한 것인지에 대한 확신은 없어 더 공부하며 제 코드에 적용시켜봐야할 것 같습니다.
- 요즘 공부를 하면서 가장 많이 느끼는 것이 “때로는 100번 공부하는 것보다 1번 사용해보는 것이 더 좋은 공부법일 수도 있다.” 라는 것을 많이 느끼고 있습니다.
- 그래서 저도 프리코스의 목적을 “많이 배워가자!” 막연한 목표보다는 “공부한 것들을 미션에 최대한 사용해보자!”라는 구체적인 목표가 정립되고 있는 것 같습니다!
- 한 번씩은 어떤 것을 공부해야할지 모를 때 함께 프리코스를 참여하고 계신 분들께서 공유해주신 정보들이 정말 유용한 것 같습니다!
- 이런 회고를 쓸 때마다 이런저런 생각이 많아지고 잡설이 길어지는 것 같은데 어쨌든 결론은 이 기회에 다른 많은 기술들을 공부하고 적용해봐야할 것 같습니다!

## 참고 자료(추천👍)

- [제리의 MVC 패턴](https://www.youtube.com/watch?v=ogaXW6KPc8I)
    - 이 영상을 보면서 막연하게 생각했던 MVC패턴과 이론으로 정립되어있던 지식들이 조금 더 와닿게 된 것 같습니다!
    - Model과 Controller의 사용이 헷갈리고 제가 “이 패턴을 어떻게 내 코드에 적용할까?”라는 어려움이 있었을 때 길을 많이 열어준 영상이라고 생각합니다!
    - 진짜 MVC 패턴을 공부는 했는데 어떻게 사용해야할지 모르겠다면 이 영상 보시는거 강추 드립니다!!
- [도기의 MVC 패턴](https://www.youtube.com/watch?v=Yzx-z6kCD2A)
    - 이 영상은 조금 더 MVC 패턴에 대해 본질적인 부분을 다룬 영상입니다!
    - 무작정 MVC 패턴이라는 틀에 갇혀서 생각하던 저에게 조금 더 본질적인 문제, 즉 코드를 유지보수에 용이하게 하기 위함이라는 MVC 패턴과 디자인 패턴들에 대한 생각을 가지게 해준 영상이라고 생각합니다.
    - 디자인 패턴들에 대해 더 유연한 생각을 갖게 해준 영상이라 생각합니다. 감사합니다!
- 그 외 구글링
<img width="680" alt="image" src="https://github.com/alswp006/woowa-6th-precourse-memory/assets/102672547/c0533496-75ea-4294-92a4-77e3df7b8a72">
    - 포스팅 해주신 분들께 감사합니다!
